{"version":3,"sources":["images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/Register.js","components/ProtectedRoute.js","components/Login.js","images/success-icon.svg","images/failure-icon.svg","components/InfoTooltip.js","utils/api.js","utils/auth.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","isLoggedIn","onLogout","pathname","useLocation","email","localStorage","getItem","className","to","src","logo","alt","onClick","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","CurrentUserContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","link","name","caption","type","aria-label","length","Main","onEditProfile","onEditAvatar","onAddPlace","cards","avatar","about","map","Footer","Date","getFullYear","ImagePopup","onClose","isOpen","event","target","currentTarget","PopupWithForm","onSubmit","title","children","btnText","useEffect","handleEscClick","key","document","addEventListener","removeEventListener","EditProfilePopup","onUpdateUser","isPending","setIsPending","useState","setName","setAbout","e","preventDefault","htmlFor","placeholder","id","minLength","maxLength","required","value","onChange","EditAvatarPopup","onUpdateAvatar","inputRef","useRef","current","ref","AddPlacePopup","setLink","withRouter","onRegister","userData","setUserData","handleChange","prev","password","ProtectedRoute","Component","component","props","onLogin","InfoTooltip","isSuccessful","success","failure","api","options","this","_baseUrl","baseUrl","_headers","headers","deleteCard","bind","res","ok","json","Promise","reject","status","token","fetch","method","then","_getResponseData","body","JSON","stringify","cardData","cardId","BASE_URL","getResponseData","setCurrentUser","history","useHistory","setIsLoggedIn","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","setCards","selectedCard","setSelectedCard","infoTooltip","setInfoTooltip","handleTokenCheck","all","getUserInfo","getInitialCards","cardsData","catch","err","console","log","jwt","push","closeAllPopups","Provider","removeItem","path","auth","data","setItem","changeLikeCardStatus","newCard","state","c","filter","editUserInfo","newUserData","finally","updateAvatar","postNewCard","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.567673e7.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.bbe2a6ea.svg\";","import { Link, useLocation } from \"react-router-dom\";\r\nimport logo from \"../images/logo.svg\";\r\n\r\nfunction Header({ isLoggedIn, onLogout }) {\r\n  const { pathname } = useLocation();\r\n  const email = localStorage.getItem(\"email\");\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <Link to=\"/\">\r\n        <img src={logo} alt=\"Логотип Mesto\" className=\"logo\" />\r\n      </Link>\r\n      {!isLoggedIn ? (\r\n        <Link\r\n          to={pathname === \"/signin\" ? \"/signup\" : \"/signin\"}\r\n          className=\"header__redirect-link\"\r\n        >\r\n          {pathname === \"/signin\" ? \"Регистрация\" : \"Войти\"}\r\n        </Link>\r\n      ) : (\r\n        <div className=\"header__group\">\r\n          <p className=\"header__email\">{email}</p>\r\n          <Link to=\"/signin\" onClick={onLogout} className=\"header__logout\">\r\n            Выйти\r\n          </Link>\r\n        </div>\r\n      )}\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import { createContext } from \"react\";\r\n\r\nexport default createContext();\r\n","import { useContext } from \"react\";\r\nimport CurrentUserContext from \"../contexts/CurrentUserContext\";\r\n\r\nfunction Card({ card, onCardClick, onCardLike, onCardDelete }) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n  const handleCardClick = () => {\r\n    onCardClick({ caption: card.name, link: card.link });\r\n  };\r\n\r\n  const handleLikeClick = () => {\r\n    onCardLike(card);\r\n  };\r\n\r\n  const handleDeleteClick = () => {\r\n    onCardDelete(card);\r\n  };\r\n  \r\n  const isOwn = card.owner === currentUser._id;\r\n\r\n  const cardDeleteButtonClassName = `element__delete-button button ${\r\n    isOwn ? \"\" : \"element__delete-button_hidden\"\r\n  }`;\r\n\r\n  const isLiked = card.likes.some((i) => i === currentUser._id);\r\n\r\n  const cardLikeButtonClassName = `element__like-button ${\r\n    isLiked ? `element__like-button_active` : \"\"\r\n  }`;\r\n\r\n  return (\r\n    <li className=\"element\">\r\n      <img\r\n        src={card.link}\r\n        alt={card.name}\r\n        className=\"element__picture\"\r\n        onClick={handleCardClick}\r\n      />\r\n      <button\r\n        type=\"button\"\r\n        aria-label=\"Удалить\"\r\n        className={cardDeleteButtonClassName}\r\n        onClick={handleDeleteClick}\r\n      ></button>\r\n      <div className=\"element__info\">\r\n        <h2 className=\"element__description\">{card.name}</h2>\r\n        <div className=\"element__like-group\">\r\n          <button\r\n            type=\"button\"\r\n            aria-label=\"Нравится\"\r\n            className={cardLikeButtonClassName}\r\n            onClick={handleLikeClick}\r\n          ></button>\r\n          <p className=\"element__like-count\">{card.likes.length}</p>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default Card;\r\n","import { useContext } from \"react\";\r\nimport CurrentUserContext from \"../contexts/CurrentUserContext\";\r\nimport Card from \"./Card\";\r\n\r\nfunction Main({\r\n  onEditProfile,\r\n  onEditAvatar,\r\n  onAddPlace,\r\n  cards,\r\n  onCardClick,\r\n  onCardLike,\r\n  onCardDelete,\r\n}) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <>\r\n      <section className=\"profile\">\r\n        <div className=\"profile__avatar-overlay\" onClick={onEditAvatar}>\r\n          <img\r\n            src={currentUser.avatar}\r\n            alt=\"Аватар\"\r\n            className=\"profile__avatar\"\r\n          />\r\n        </div>\r\n        <div className=\"profile__info\">\r\n          <div className=\"profile__row\">\r\n            <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n            <button\r\n              type=\"button\"\r\n              aria-label=\"Редактировать профиль\"\r\n              className=\"profile__edit-button button\"\r\n              onClick={onEditProfile}\r\n            ></button>\r\n          </div>\r\n          <p className=\"profile__description\">{currentUser.about}</p>\r\n        </div>\r\n        <button\r\n          type=\"button\"\r\n          aria-label=\"Добавить новую картинку\"\r\n          className=\"profile__add-button button\"\r\n          onClick={onAddPlace}\r\n        ></button>\r\n      </section>\r\n\r\n      <section className=\"elements\">\r\n        <ul className=\"elements__list\">\r\n          {cards.map((card) => {\r\n            return (\r\n              <Card\r\n                card={card}\r\n                onCardClick={onCardClick}\r\n                onCardLike={onCardLike}\r\n                onCardDelete={onCardDelete}\r\n                key={card._id}\r\n              />\r\n            );\r\n          })}\r\n        </ul>\r\n      </section>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","function Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">{`© ${new Date().getFullYear()}. Mesto Russia`}</p>\r\n    </footer>\r\n  );\r\n}\r\nexport default Footer;\r\n","function ImagePopup({ card, onClose }) {\r\n  const handleOverlayClick = (event) => {\r\n    if (event.target === event.currentTarget) onClose();\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`popup popup_picture ${card.isOpen ? \"popup_opened\" : null}`}\r\n      onClick={handleOverlayClick}\r\n    >\r\n      <figure className=\"popup__figure\">\r\n        <button\r\n          type=\"button\"\r\n          aria-label=\"Закрыть окно\"\r\n          className=\"popup__close-button button\"\r\n          onClick={onClose}\r\n        ></button>\r\n        <img src={card.link} alt=\"Картинка\" className=\"popup__picture\" />\r\n        <figcaption className=\"popup__picture-caption\">\r\n          {card.caption}\r\n        </figcaption>\r\n      </figure>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ImagePopup;\r\n","import { useEffect } from \"react\";\r\n\r\nfunction PopupWithForm({\r\n  isOpen,\r\n  onClose,\r\n  onSubmit,\r\n  name,\r\n  title,\r\n  children,\r\n  btnText,\r\n}) {\r\n  const handleOverlayClick = (event) => {\r\n    if (event.target === event.currentTarget && isOpen) onClose();\r\n  };\r\n\r\n  useEffect(() => {\r\n    const handleEscClick = (event) => {\r\n      if (event.key === \"Escape\") onClose();\r\n    };\r\n\r\n    if (isOpen) {\r\n      document.addEventListener(\"keydown\", handleEscClick);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", handleEscClick);\r\n    };\r\n  }, [isOpen, onClose]);\r\n\r\n  return (\r\n    <div\r\n      className={`popup popup_${name} ${isOpen ? \"popup_opened\" : \"\"}`}\r\n      onClick={handleOverlayClick}\r\n    >\r\n      <div className=\"popup__container\">\r\n        <button\r\n          type=\"button\"\r\n          aria-label=\"Закрыть окно\"\r\n          className=\"popup__close-button button\"\r\n          onClick={onClose}\r\n        ></button>\r\n        <h2 className=\"popup__title\">{title}</h2>\r\n        <form\r\n          className={`popup__form popup__form_type_${name}`}\r\n          name=\"edit\"\r\n          onSubmit={onSubmit}\r\n        >\r\n          {children}\r\n          <button type=\"submit\" className=\"popup__submit-button\">\r\n            {btnText}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;\r\n","import { useContext, useState, useEffect } from \"react\";\r\nimport CurrentUserContext from \"../contexts/CurrentUserContext\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction EditProfilePopup({\r\n  isOpen,\r\n  onClose,\r\n  onUpdateUser,\r\n  isPending,\r\n  setIsPending,\r\n}) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n  const [name, setName] = useState(\"\");\r\n  const [about, setAbout] = useState(\"\");\r\n\r\n  const handleNameChange = (e) => {\r\n    setName(e.target.value);\r\n  };\r\n\r\n  const handleDescriptionChange = (e) => {\r\n    setAbout(e.target.value);\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    setIsPending(true);\r\n\r\n    onUpdateUser({\r\n      name,\r\n      about,\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    setName(currentUser.name);\r\n    setAbout(currentUser.about);\r\n  }, [currentUser, isOpen]);\r\n\r\n  return (\r\n    <PopupWithForm\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      name=\"edit\"\r\n      title=\"Редактировать профиль\"\r\n      btnText={isPending ? \"Сохранение...\" : \"Сохранить\"}\r\n    >\r\n      <label htmlFor=\"name\" className=\"popup__field\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Имя\"\r\n          className=\"popup__input\"\r\n          id=\"name\"\r\n          name=\"name\"\r\n          minLength=\"2\"\r\n          maxLength=\"40\"\r\n          required\r\n          value={name || \"\"}\r\n          onChange={handleNameChange}\r\n        />\r\n        <span className=\"popup__error name-error\"></span>\r\n      </label>\r\n      <label htmlFor=\"about\" className=\"popup__field\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"О себе\"\r\n          className=\"popup__input\"\r\n          id=\"about\"\r\n          name=\"about\"\r\n          minLength=\"2\"\r\n          maxLength=\"200\"\r\n          required\r\n          value={about || \"\"}\r\n          onChange={handleDescriptionChange}\r\n        />\r\n        <span className=\"popup__error about-error\"></span>\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;\r\n","import { useRef } from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction EditAvatarPopup({\r\n  isOpen,\r\n  onClose,\r\n  onUpdateAvatar,\r\n  isPending,\r\n  setIsPending,\r\n}) {\r\n  const inputRef = useRef();\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    setIsPending(true);\r\n\r\n    onUpdateAvatar(inputRef.current.value);\r\n    inputRef.current.value = \"\";\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"avatar-update\"\r\n      title=\"Обновить аватар\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      btnText={isPending ? \"Сохранение...\" : \"Сохранить\"}\r\n    >\r\n      <label htmlFor=\"avatar\" className=\"popup__field\">\r\n        <input\r\n          ref={inputRef}\r\n          type=\"url\"\r\n          placeholder=\"Ссылка на изображение\"\r\n          className=\"popup__input\"\r\n          id=\"avatar\"\r\n          name=\"avatar\"\r\n          required\r\n        />\r\n        <span className=\"popup__error avatar-error\"></span>\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import { useState } from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction AddPlacePopup({\r\n  isOpen,\r\n  onClose,\r\n  onAddPlace,\r\n  isPending,\r\n  setIsPending,\r\n}) {\r\n  const [name, setName] = useState(\"\");\r\n  const [link, setLink] = useState(\"\");\r\n\r\n  const handleCaptionChange = (e) => {\r\n    setName(e.target.value);\r\n  };\r\n\r\n  const handleLinkChange = (e) => {\r\n    setLink(e.target.value);\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    setIsPending(true);\r\n\r\n    onAddPlace({\r\n      name,\r\n      link,\r\n    });\r\n\r\n    setName(\"\");\r\n    setLink(\"\");\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"add\"\r\n      title=\"Новое место\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      btnText={isPending ? \"Сохранение...\" : \"Создать\"}\r\n    >\r\n      <label htmlFor=\"caption\" className=\"popup__field\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Название\"\r\n          className=\"popup__input\"\r\n          id=\"caption\"\r\n          name=\"name\"\r\n          minLength=\"2\"\r\n          maxLength=\"30\"\r\n          required\r\n          value={name}\r\n          onChange={handleCaptionChange}\r\n        />\r\n        <span className=\"popup__error caption-error\"></span>\r\n      </label>\r\n      <label htmlFor=\"link\" className=\"popup__field\">\r\n        <input\r\n          type=\"url\"\r\n          placeholder=\"Ссылка на изображение\"\r\n          className=\"popup__input\"\r\n          id=\"link\"\r\n          name=\"link\"\r\n          required\r\n          value={link}\r\n          onChange={handleLinkChange}\r\n        />\r\n        <span className=\"popup__error link-error\"></span>\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","import { useState } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\n\r\nfunction Register({ onRegister }) {\r\n  const [userData, setUserData] = useState({});\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setUserData((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    onRegister(userData);\r\n  };\r\n\r\n  return (\r\n    <div className=\"user-form\">\r\n      <h2 className=\"user-form__title\">Регистрация</h2>\r\n      <form className=\"user-form__form\" name=\"edit\" onSubmit={handleSubmit}>\r\n        <input\r\n          className=\"user-form__input\"\r\n          id=\"email\"\r\n          name=\"email\"\r\n          type=\"email\"\r\n          placeholder=\"Email\"\r\n          value={userData.email || \"\"}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <input\r\n          className=\"user-form__input\"\r\n          id=\"password\"\r\n          name=\"password\"\r\n          type=\"text\"\r\n          placeholder=\"Пароль\"\r\n          value={userData.password || \"\"}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <button type=\"submit\" className=\"user-form__submit-button\">\r\n          Зарегистрироваться\r\n        </button>\r\n      </form>\r\n      <p className=\"user-form__alt-option\">\r\n        Уже зарегистрированы?{\" \"}\r\n        <Link to=\"sign-in\" className=\"user-form__redirect-link\">\r\n          Войти\r\n        </Link>\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(Register);\r\n","import { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props }) => {\r\n  return (\r\n    <Route>\r\n      {() =>\r\n        props.isLoggedIn ? (\r\n          <Component {...props} />\r\n        ) : (\r\n          <Redirect to=\"./signin\" />\r\n        )\r\n      }\r\n    </Route>\r\n  );\r\n};\r\n\r\nexport default ProtectedRoute;\r\n","import { useState } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nfunction Login({ onLogin }) {\r\n  const [userData, setUserData] = useState({});\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setUserData((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    onLogin(userData);\r\n  };\r\n\r\n  return (\r\n    <div className=\"user-form\">\r\n      <h2 className=\"user-form__title\">Вход</h2>\r\n      <form className=\"user-form__form\" name=\"edit\" onSubmit={handleSubmit}>\r\n        <input\r\n          className=\"user-form__input\"\r\n          id=\"email\"\r\n          name=\"email\"\r\n          type=\"email\"\r\n          placeholder=\"Email\"\r\n          value={userData.email || \"\"}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <input\r\n          className=\"user-form__input\"\r\n          id=\"password\"\r\n          name=\"password\"\r\n          type=\"text\"\r\n          placeholder=\"Пароль\"\r\n          value={userData.password || \"\"}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <button type=\"submit\" className=\"user-form__submit-button\">\r\n          Войти\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(Login);\r\n","export default __webpack_public_path__ + \"static/media/success-icon.a9eb6caf.svg\";","export default __webpack_public_path__ + \"static/media/failure-icon.d4ce2a26.svg\";","import { useEffect } from \"react\";\r\nimport success from \"../images/success-icon.svg\";\r\nimport failure from \"../images/failure-icon.svg\";\r\n\r\nfunction InfoTooltip({ isOpen, onClose, isSuccessful }) {\r\n  const handleOverlayClick = (event) => {\r\n    if (event.target === event.currentTarget && isOpen) onClose();\r\n  };\r\n\r\n  useEffect(() => {\r\n    const handleEscClick = (event) => {\r\n      if (event.key === \"Escape\") onClose();\r\n    };\r\n\r\n    document.addEventListener(\"keydown\", handleEscClick);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", handleEscClick);\r\n    };\r\n  }, [isOpen, onClose]);\r\n\r\n  return (\r\n    <div\r\n      className={`popup ${isOpen ? \"popup_opened\" : \"\"}`}\r\n      onClick={handleOverlayClick}\r\n    >\r\n      <div className=\"popup__container\">\r\n        <button\r\n          type=\"button\"\r\n          aria-label=\"Закрыть окно\"\r\n          className=\"popup__close-button button\"\r\n          onClick={onClose}\r\n        ></button>\r\n        <img\r\n          src={isSuccessful ? success : failure}\r\n          alt={isSuccessful ? \"Успешная регистрация\" : \"Что-то пошло не так\"}\r\n          className=\"popup__status-img\"\r\n        />\r\n        <h2 className=\"popup__status\">\r\n          {isSuccessful\r\n            ? \"Вы успешно зарегистрировались!\"\r\n            : \"Что-то пошло не так! Попробуйте ещё раз.\"}\r\n        </h2>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default InfoTooltip;\r\n","class Api {\r\n  constructor(options) {\r\n    this._baseUrl = options.baseUrl;\r\n    this._headers = options.headers;\r\n    this.deleteCard = this.deleteCard.bind(this);\r\n  }\r\n\r\n  _getResponseData(res) {\r\n    return res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`);\r\n  }\r\n\r\n  getUserInfo(token) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        ...this._headers,\r\n        \"Authorization\": `Bearer ${token}`\r\n      },\r\n    }).then((res) => this._getResponseData(res));\r\n  }\r\n\r\n  editUserInfo(userData, token) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        ...this._headers,\r\n        \"Authorization\": `Bearer ${token}`\r\n      },\r\n      body: JSON.stringify({\r\n        name: `${userData.name}`,\r\n        about: `${userData.about}`,\r\n      }),\r\n    }).then((res) => this._getResponseData(res));\r\n  }\r\n\r\n  updateAvatar(link, token) {\r\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        ...this._headers,\r\n        \"Authorization\": `Bearer ${token}`\r\n      },\r\n      body: JSON.stringify({\r\n        avatar: link,\r\n      }),\r\n    }).then((res) => this._getResponseData(res));\r\n  }\r\n\r\n  getInitialCards(token) {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        ...this._headers,\r\n        \"Authorization\": `Bearer ${token}`\r\n      },\r\n    }).then((res) => this._getResponseData(res));\r\n  }\r\n\r\n  postNewCard(cardData, token) {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        ...this._headers,\r\n        \"Authorization\": `Bearer ${token}`\r\n      },\r\n      body: JSON.stringify({\r\n        name: `${cardData.name}`,\r\n        link: `${cardData.link}`,\r\n      }),\r\n    }).then((res) => this._getResponseData(res));\r\n  }\r\n\r\n  changeLikeCardStatus(cardId, isLiked, token) {\r\n    return fetch(`${this._baseUrl}/cards/${cardId}/likes`, {\r\n      method: isLiked ? \"DELETE\" : \"PUT\",\r\n      headers: {\r\n        ...this._headers,\r\n        \"Authorization\": `Bearer ${token}`\r\n      },\r\n    }).then((res) => this._getResponseData(res));\r\n  }\r\n\r\n  deleteCard(cardId, token) {\r\n    return fetch(`${this._baseUrl}/cards/${cardId}`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        ...this._headers,\r\n        \"Authorization\": `Bearer ${token}`\r\n      },\r\n    }).then((res) => this._getResponseData(res));\r\n  }\r\n}\r\n\r\nconst api = new Api({\r\n  baseUrl: \"http://localhost:5500\",\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});\r\n\r\nexport default api;\r\n","export const BASE_URL = \"http://localhost:5500\";\r\n\r\nconst getResponseData = (res) => {\r\n  return res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`);\r\n};\r\n\r\nexport const register = (password, email) => {\r\n  return fetch(`${BASE_URL}/signup`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Origin\": \"http://localhost:3000\",\r\n      \"Host\": \"http://localhost:5500\",\r\n    },\r\n    body: JSON.stringify({ password, email }),\r\n  }).then((res) => res.json());\r\n};\r\n\r\nexport const authorize = (password, email) => {\r\n  return fetch(`${BASE_URL}/signin`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Origin\": \"http://localhost:3000\",\r\n      \"Host\": \"http://localhost:5500\",\r\n    },\r\n    body: JSON.stringify({ password, email }),\r\n  }).then((res) => getResponseData(res));\r\n};\r\n\r\nexport const checkToken = (token) => {\r\n  return fetch(`${BASE_URL}/users/me`, {\r\n    method: \"GET\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Origin\": \"http://localhost:3000\",\r\n      \"Host\": \"localhost:5500\",\r\n      \"Authorization\": `Bearer ${token}`,\r\n    },\r\n  }).then((res) => getResponseData(res));\r\n};\r\n","import \"../index.css\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { Route, Switch, useHistory, withRouter } from \"react-router-dom\";\r\nimport Header from \"./Header\";\r\nimport Main from \"./Main\";\r\nimport Footer from \"./Footer\";\r\nimport ImagePopup from \"./ImagePopup\";\r\nimport CurrentUserContext from \"../contexts/CurrentUserContext\";\r\nimport EditProfilePopup from \"./EditProfilePopup\";\r\nimport EditAvatarPopup from \"./EditAvatarPopup\";\r\nimport AddPlacePopup from \"./AddPlacePopup\";\r\nimport Register from \"./Register\";\r\nimport ProtectedRoute from \"./ProtectedRoute\";\r\nimport Login from \"./Login\";\r\nimport InfoTooltip from \"./InfoTooltip\";\r\nimport api from \"../utils/api\";\r\nimport * as auth from \"../utils/auth\";\r\n\r\nfunction App() {\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const history = useHistory();\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\r\n  const [cards, setCards] = useState([]);\r\n  const [selectedCard, setSelectedCard] = useState({\r\n    isOpen: false,\r\n    caption: \"\",\r\n    link: \"\",\r\n  });\r\n  const [infoTooltip, setInfoTooltip] = useState({\r\n    isOpen: false,\r\n    isSuccessful: false,\r\n  });\r\n  const [isPending, setIsPending] = useState(false);\r\n\r\n  useEffect(() => {\r\n    handleTokenCheck();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isLoggedIn) {\r\n      const token = localStorage.getItem('jwt');\r\n      Promise.all([api.getUserInfo(token) , api.getInitialCards(token)])\r\n      .then(([userData, cardsData]) => {\r\n        setCurrentUser(userData);\r\n        setCards([...cardsData]);\r\n      })\r\n      .catch((err) => console.log(err));\r\n    }\r\n  }, [isLoggedIn]);\r\n\r\n  const handleTokenCheck = () => {\r\n    if (localStorage.getItem(\"jwt\")) {\r\n      const jwt = localStorage.getItem(\"jwt\");\r\n      auth\r\n        .checkToken(jwt)\r\n        .then((res) => {\r\n          if (res) {\r\n            setIsLoggedIn(true);\r\n            history.push(\"/\");\r\n          }\r\n        })\r\n        .catch((err) => console.log(err));\r\n    }\r\n  };\r\n\r\n  const handleLogin = ({ password, email }) => {\r\n    auth\r\n      .authorize(password, email)\r\n      .then((data) => {\r\n        if (data.token) {\r\n          localStorage.setItem(\"jwt\", data.token);\r\n          localStorage.setItem(\"email\", email);\r\n          setIsLoggedIn(true);\r\n          setCurrentUser((prev) => ({ ...prev, email }));\r\n          history.push(\"/\");\r\n        }\r\n        return data;\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  const handleRegister = ({ password, email }) => {\r\n    auth\r\n      .register(password, email)\r\n      .then(({_id, email}) => {\r\n        if (_id && email) {\r\n          setInfoTooltip({\r\n            isOpen: true,\r\n            isSuccessful: true,\r\n          });\r\n          history.push(\"/signin\");\r\n        } else {\r\n          setInfoTooltip({\r\n            isOpen: true,\r\n            isSuccessful: false,\r\n          });\r\n        }\r\n        return {_id, email};\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    setIsLoggedIn(false);\r\n    localStorage.removeItem(\"jwt\");\r\n    localStorage.removeItem(\"email\");\r\n  };\r\n\r\n  const handleEditProfileClick = () => {\r\n    setIsEditProfilePopupOpen(true);\r\n  };\r\n\r\n  const handleEditAvatarClick = () => {\r\n    setIsEditAvatarPopupOpen(true);\r\n  };\r\n\r\n  const handleAddPlaceClick = () => {\r\n    setIsAddPlacePopupOpen(true);\r\n  };\r\n\r\n  const handleCardClick = (card) => {\r\n    setSelectedCard({\r\n      isOpen: true,\r\n      caption: card.caption,\r\n      link: card.link,\r\n    });\r\n  };\r\n\r\n  const handleUpdateUser = (userData) => {\r\n    const token = localStorage.getItem('jwt');\r\n    api\r\n      .editUserInfo(userData, token)\r\n      .then((newUserData) => {\r\n        setCurrentUser((prev) => ({ ...prev, ...newUserData }));\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => console.log(`Error in profile editing: ${err}`))\r\n      .finally(() => setIsPending(false));\r\n  };\r\n\r\n  const handleUpdateAvatar = (link) => {\r\n    const token = localStorage.getItem('jwt');\r\n    api\r\n      .updateAvatar(link, token)\r\n      .then(({ avatar }) => {\r\n        setCurrentUser((prev) => ({ ...prev, avatar }));\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => console.log(`Error in avatar updating: ${err}`))\r\n      .finally(() => setIsPending(false));\r\n  };\r\n\r\n  const handleAddPlaceSubmit = (cardData) => {\r\n    const token = localStorage.getItem('jwt');\r\n    api\r\n      .postNewCard(cardData, token)\r\n      .then((newCard) => {\r\n        setCards([newCard, ...cards]);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => console.log(`Error in card posting: ${err}`))\r\n      .finally(() => setIsPending(false));\r\n  };\r\n\r\n  const handleCardLike = (card) => {\r\n    const token = localStorage.getItem('jwt');\r\n    const isLiked = card.likes.some((i) => i === currentUser._id);\r\n\r\n    api\r\n      .changeLikeCardStatus(card._id, isLiked, token)\r\n      .then((newCard) => {\r\n        setCards((state) =>\r\n          state.map((c) => (c._id === card._id ? newCard : c))\r\n        );\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  const handleCardDelete = (card) => {\r\n    const token = localStorage.getItem('jwt');\r\n    api\r\n      .deleteCard(card._id, token)\r\n      .then(() => {\r\n        setCards((state) => state.filter((c) => c._id !== card._id));\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  const closeAllPopups = () => {\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setSelectedCard({\r\n      isOpen: false,\r\n      caption: \"\",\r\n      link: \"\",\r\n    });\r\n    setInfoTooltip({\r\n      isOpen: false,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"page\">\r\n        <Header isLoggedIn={isLoggedIn} onLogout={handleLogout} />\r\n        <main className=\"content\">\r\n          <Switch>\r\n            <Route path=\"/signup\">\r\n              <Register onRegister={handleRegister} />\r\n            </Route>\r\n            <Route path=\"/signin\">\r\n              <Login onLogin={handleLogin} />\r\n            </Route>\r\n            <ProtectedRoute\r\n              path=\"/\"\r\n              component={Main}\r\n              isLoggedIn={isLoggedIn}\r\n              onEditProfile={handleEditProfileClick}\r\n              onAddPlace={handleAddPlaceClick}\r\n              onEditAvatar={handleEditAvatarClick}\r\n              cards={cards}\r\n              onCardClick={handleCardClick}\r\n              onCardLike={handleCardLike}\r\n              onCardDelete={handleCardDelete}\r\n            />\r\n          </Switch>\r\n        </main>\r\n        <Footer />\r\n      </div>\r\n      <InfoTooltip\r\n        isOpen={infoTooltip.isOpen}\r\n        onClose={closeAllPopups}\r\n        isSuccessful={infoTooltip.isSuccessful}\r\n      />\r\n      <EditProfilePopup\r\n        isOpen={isEditProfilePopupOpen}\r\n        onClose={closeAllPopups}\r\n        onUpdateUser={handleUpdateUser}\r\n        isPending={isPending}\r\n        setIsPending={setIsPending}\r\n      />\r\n      <EditAvatarPopup\r\n        isOpen={isEditAvatarPopupOpen}\r\n        onClose={closeAllPopups}\r\n        onUpdateAvatar={handleUpdateAvatar}\r\n        isPending={isPending}\r\n        setIsPending={setIsPending}\r\n      />\r\n      <AddPlacePopup\r\n        isOpen={isAddPlacePopupOpen}\r\n        onClose={closeAllPopups}\r\n        onAddPlace={handleAddPlaceSubmit}\r\n        isPending={isPending}\r\n        setIsPending={setIsPending}\r\n      />\r\n      <ImagePopup card={selectedCard} onClose={closeAllPopups} />\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default withRouter(App);\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./components/App\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}